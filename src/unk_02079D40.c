#include <nitro.h>
#include <string.h>

#include "struct_defs/pokemon.h"
#include "struct_defs/box_pokemon.h"

#include "unk_02073C2C.h"
#include "unk_02079D40.h"

#include "constants/species.h"

const u8 Unk_020F0780[] = {
	0x0,
	0x1,
	0x1,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x1,
	0x1,
	0x0,
	0x1,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x2,
	0x1,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x0,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x0,
	0x0,
	0x2,
	0x1,
	0x0,
	0x0,
	0x2,
	0x2,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x1,
	0x1,
	0x1,
	0x2,
	0x1,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x0,
	0x2,
	0x0,
	0x1,
	0x1,
	0x1,
	0x2,
	0x2,
	0x1,
	0x1,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x1,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x1,
	0x1,
	0x1,
	0x2,
	0x2,
	0x1,
	0x2,
	0x2,
	0x1,
	0x1,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x1,
	0x2,
	0x1,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x0,
	0x0,
	0x1,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x1,
	0x2,
	0x2,
	0x0,
	0x0,
	0x2,
	0x0,
	0x0,
	0x1,
	0x2,
	0x2,
	0x1,
	0x1,
	0x1,
	0x1,
	0x2,
	0x2,
	0x1,
	0x1,
	0x1,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x2,
	0x2,
	0x2,
	0x0,
	0x0,
	0x2,
	0x0,
	0x0,
	0x1,
	0x2,
	0x0,
	0x0,
	0x2,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x1,
	0x2,
	0x2,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x0,
	0x2,
	0x0,
	0x1,
	0x0,
	0x1,
	0x0,
	0x1,
	0x1,
	0x1,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x2,
	0x0,
	0x2,
	0x0,
	0x2,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x1,
	0x1,
	0x1,
	0x2,
	0x0,
	0x1,
	0x1,
	0x2,
	0x2,
	0x1,
	0x1,
	0x1,
	0x1,
	0x0,
	0x2,
	0x2,
	0x2,
	0x1,
	0x2,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x0,
	0x1,
	0x2,
	0x0,
	0x0,
	0x2,
	0x0,
	0x1,
	0x0,
	0x1,
	0x0,
	0x2,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x1,
	0x0,
	0x0,
	0x0,
	0x2,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x2,
	0x0,
	0x0,
	0x0,
	0x2,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x2,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x1,
	0x0,
	0x0,
	0x1,
	0x1,
	0x1,
	0x1,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x1,
	0x1,
	0x1,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x2,
	0x2,
	0x0,
	0x1,
	0x0,
	0x2,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x2,
	0x1,
	0x1,
	0x0,
	0x2,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x1,
	0x1,
	0x0,
	0x0,
	0x1,
	0x0,
	0x2,
	0x1,
	0x0,
	0x2,
	0x1,
	0x1,
	0x0,
	0x2,
	0x2,
	0x0,
	0x1,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x2,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x1,
	0x2,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x1,
	0x0,
	0x0,
	0x0,
	0x0,
	0x0
};


u32 sub_02079D40 (const BoxPokemon * param0)
{
    u32 v0;
    u32 v1;
    BOOL v2;
    u32 v3;
    u32 v4;

    v2 = sub_02073D20((BoxPokemon *)param0);
    v0 = sub_02074570((BoxPokemon *)param0, MON_DATA_SPECIES, NULL);
    v4 = sub_02074570((BoxPokemon *)param0, MON_DATA_IS_EGG, NULL);
    v3 = sub_02079E44((BoxPokemon *)param0);
    v1 = sub_02079D8C(v0, v4, v3);

    sub_02073D48((BoxPokemon *)param0, v2);
    return v1;
}

u32 sub_02079D80 (Pokemon * param0)
{
    return sub_02079D40((const BoxPokemon *)sub_02076B10(param0));
}

u32 sub_02079D8C (u32 species, u32 param1, u32 form)
{
    if (param1 == 1) {
        if (species == SPECIES_MANAPHY) {
            return 502;
        } else {
            return 501;
        }
    }

    form = SanitizeFormId(species, form);

    if (form != 0) {
        if (species == SPECIES_DEOXYS) {
            return 503 + form - 1;
        }

        if (species == SPECIES_UNOWN) {
            return 507 + form - 1;
        }

        if (species == SPECIES_BURMY) {
            return 534 + form - 1;
        }

        if (species == SPECIES_WORMADAM) {
            return 536 + form - 1;
        }

        if (species == SPECIES_SHELLOS) {
            return 538 + form - 1;
        }

        if (species == SPECIES_GASTRODON) {
            return 539 + form - 1;
        }

        if (species == SPECIES_GIRATINA) {
            return 540 + form - 1;
        }

        if (species == SPECIES_SHAYMIN) {
            return 541 + form - 1;
        }

        if (species == SPECIES_ROTOM) {
            return 542 + form - 1;
        }
    }

    if (species > NATIONAL_DEX_COUNT) {
        species = SPECIES_NONE;
    }

    return 7 + species;
}

u16 sub_02079E44 (const BoxPokemon * boxMon)
{
    u32 species = sub_02074570((BoxPokemon *)boxMon, MON_DATA_SPECIES_EGG, NULL);

    switch (species) {
    case SPECIES_UNOWN:
        return sub_02076B00((BoxPokemon *)boxMon);
    case SPECIES_DEOXYS:
    case SPECIES_BURMY:
    case SPECIES_WORMADAM:
    case SPECIES_SHELLOS:
    case SPECIES_GASTRODON:
    case SPECIES_GIRATINA:
    case SPECIES_SHAYMIN:
    case SPECIES_ROTOM:
        return sub_02074570((BoxPokemon *)boxMon, MON_DATA_FORM, NULL);
    default:
        return 0;
    }

    return 0;
}

const u8 sub_02079EDC (u32 species, u32 param1, u32 param2)
{
    if (param2 == 1) {
        if (species == SPECIES_MANAPHY) {
            species = 495;
        } else {
            species = 494;
        }
    } else if (species > NATIONAL_DEX_COUNT) {
        species = 0;
    } else if (param1 != 0) {
        if (species == SPECIES_DEOXYS) {
            species = 496 + param1 - 1;
        } else if (species == SPECIES_UNOWN) {
            species = 499 + param1 - 1;
        } else if (species == SPECIES_BURMY) {
            species = 527 + param1 - 1;
        } else if (species == SPECIES_WORMADAM) {
            species = 529 + param1 - 1;
        } else if (species == SPECIES_SHELLOS) {
            species = 531 + param1 - 1;
        } else if (species == SPECIES_GASTRODON) {
            species = 532 + param1 - 1;
        } else if (species == SPECIES_GIRATINA) {
            species = 533 + param1 - 1;
        } else if (species == SPECIES_SHAYMIN) {
            species = 534 + param1 - 1;
        } else if (species == SPECIES_ROTOM) {
            species = 535 + param1 - 1;
        }
    }

    return Unk_020F0780[species];
}

const u8 sub_02079F84 (const BoxPokemon * param0)
{
    BOOL v0;
    u32 v1;
    u32 v2;
    u32 v3;

    v0 = sub_02073D20((BoxPokemon *)param0);
    v2 = sub_02079E44(param0);
    v1 = sub_02074570((BoxPokemon *)param0, MON_DATA_SPECIES, NULL);
    v3 = sub_02074570((BoxPokemon *)param0, MON_DATA_IS_EGG, NULL);

    sub_02073D48((BoxPokemon *)param0, v0);

    return sub_02079EDC(v1, v2, v3);
}

const u8 sub_02079FC4 (Pokemon * param0)
{
    return sub_02079F84((const BoxPokemon *)sub_02076B10(param0));
}

u32 sub_02079FD0 (void)
{
    return 0;
}

u32 sub_02079FD4 (void)
{
    return 2;
}

u32 sub_02079FD8 (void)
{
    return 4;
}

u32 sub_02079FDC (void)
{
    return 6;
}

u32 sub_02079FE0 (void)
{
    return 1;
}

u32 sub_02079FE4 (void)
{
    return 3;
}

u32 sub_02079FE8 (void)
{
    return 5;
}
